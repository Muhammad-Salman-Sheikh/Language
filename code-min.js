/**
	* The minified version of SIMPLE.
**/
var $jscomp$templatelit$1=["\n"];$jscomp$templatelit$1.raw=["\\n"];var $jscomp$templatelit$0=[" "];$jscomp$templatelit$0.raw=[" "];i=function(d){return JSON.stringify(d)};var Interpreter=function(){var d=this;this.functions={};this.variables={};this.input=function(c){return d.interpret(d.parse(d.tokenize(c)))};this.interpret=function(c){switch(c.type){case "operator":var b=d.interpret(c.left),e=d.interpret(c.right),f=c.operator;if("+"==f)c=b+e;else if("*"==f)c=b*e;else if("-"==f)c=b-e;else if("/"==f)c=b/e;else{if("%"!=f)throw"Unknown operator ? "+i(c);c=b%e}return c;case "number":return+c.value;case "assignment":if(c.name in d.functions)throw"Variable name collides with function name : "+c.name;b=d.interpret(c.value);return d.variables[c.name]=b;case "identifier":if(c.value in d.variables)c=d.variables[c.value];else throw"Missing identifier : "+c.value;return c;case "function":if(c.name in d.variables)throw"Function name collides with variable name: "+c.name;d.functions[c.name]=c;return"";case "fnCall":return b=d.functions[c.name],e=c.args.reduce(function(b,e){return b[e[0]]=d.interpret(e[1]),b},Object.create(d.variables)),c=d.variables,d.variables=e,b=d.interpret(b.body),d.variables= c,b;case "container":return d.interpret(c.child);case "noop":c="";for(b=1;100>=b;b++)c=0==b%3&&0==b%5?c+"FizzBuzz ":0==b%3?c+"Fizz ":0==b%5?c+"Buzz ":c+(b+" ");throw c.split($jscomp$templatelit$0).join($jscomp$templatelit$1);default:throw"What type is "+i(c);}};this.tokenize=function(c){return""==c?[]:c.split(/\s*(=>|[-+*\/%=\(\)]|[A-Za-z_][A-Za-z0-9_]*|[0-9]*\.?[0-9]+)\s*/g).filter(function(b){return!b.match(/^\s*$/)})};this.parse=function(c){return P=(new Parser(d.functions,c)).parse(),0!=c.length? "Extra tokens : "+i(c):P};this.parseString=function(c){return d.parse(d.tokenize(c))}},Parser=function(d,c){var b=this;this.functions=d;this.tokens=c;this.parse=function(){if(0==b.tokens.length)var e={type:"noop"};else if("Func"===b.tokens[0]){b.shift();e=b.tokens.shift();var c=b.parseFnArgs();b.shift();var d=b.parseExpr();b.validateIdentifiers(c,d);e={type:"function",name:e,args:c,body:d}}else e=b.parseExpr();return e};this.shift=function(){return b.tokens.shift()};this.parseExpr=function(){var e= null;if(0===b.tokens.length)throw"Hello, World!";if(b.isIdentifier()&&"="===b.tokens[1])e=b.parseAssignment();else if(b.tokens[0].match(/^[0-9][\.0-9]*$/))e={type:"number",value:b.tokens.shift()};else if(b.isIdentifier()&&b.functions[b.tokens[0]])e=b.parseFnCall();else if(b.isIdentifier())e={type:"identifier",value:b.tokens.shift()};else if("("===b.tokens[0][0])e=b.parseContainer();else if("Func"===b.tokens[0])e=b.parseFn();else if(")"===b.tokens[0][0])throw"What is : "+i(b.tokens);if(!b.tokens.length|| !b.isOperator())return e;var c=b.shift();var d=b.parseExpr();if("operator"!==d.type||!b.shouldSwapOperators(c,d.operator))return{type:"operator",operator:c,left:e,right:d};d.left={type:"operator",operator:c,left:e,right:d.left};return d};this.isOperator=function(){return t=b.tokens[0],"+"===t||"-"===t||"*"===t||"/"===t||"%"===t};this.shouldSwapOperators=function(b,c){return"*"==b||"/"==b||"%"==b||"+"==c||"-"==c};this.isIdentifier=function(){return b.tokens[0].match(/^[a-zA-Z][_a-zA-Z0-9]*$/)};this.parseAssignment= function(){var c=b.tokens.shift();b.shift();var d=b.parseExpr();return{type:"assignment",name:c,value:d}};this.parseFnCall=function(){var c=b.tokens.shift(),d=b.functions[c].args.map(function(c){if(0===b.tokens.length)throw"Too few arguments!";return[c,b.parse()]});return{type:"fnCall",name:c,args:d}};this.parseContainer=function(){b.shift();var c=b.parseExpr();b.shift();return{type:"container",child:c}};this.parseFnArgs=function(){for(var c=[];"=>"!==b.tokens[0];)c.push(b.tokens.shift());if(b.containsDuplicates(c))throw"Duplicate argument names"; return c};this.containsDuplicates=function(b){for(var c=0;c<b.length;++c)for(var d=c+1;d<b.length;++d)if(b[c]===b[d])return!0;return!1};this.validateIdentifiers=function(c,d){b.varNames(d).forEach(function(b){if(-1===c.indexOf(b))throw"Unknown identifier: "+b;})};this.varNames=function(c){switch(c.type){case "operator":return b.varNames(c.left).concat(b.varNames(c.right));case "number":return[];case "assignment":return b.varNames(c.value);case "identifier":return[c.value];case "function":return[]; case "fnCall":var d=[];args.forEach(function(b){return d=d.concat(b)});return d;case "container":return b.varNames(c.child);case "noop":return[];default:throw"What type is : "+i(c);}}};a=new Interpreter;try{a.input(CODE)}catch(d){console.log(d)};
